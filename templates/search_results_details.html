{% extends 'base.html' %}

{% block search_results %}

<div class="global_bar_box" style="padding: 0px;">
    {% if accounts == '0' %}
        <div style="padding: 0px 16px; padding-top: 8px;">
            <div>Results for 
                <strong>{{ query }}</strong> in 
                <strong>all accounts</strong> for
                <strong>{{ search_type }}</strong>
            </div>
        </div>
    {% else %}
        {% set accounts_search = Config.query.filter_by(id=accounts).first() %}
        <div style="padding: 0px 16px; padding-top: 8px;">  
            <div>Results for 
                <strong>{{ query }}</strong> in account
                <strong>{{ accounts_search.name }}</strong> for
                <strong>{{ search_type }}</strong>
            </div>
        </div>
    {% endif %}
    
    <a href='/search_results/{{ query }}/{{ accounts }}/{{ search_type }}' 
       style="text-decoration: none; padding-left: 8px;">
        <input class="custom_button" type='button' value='Filenames'>
    </a>
</div>

<div class="form_box" style="max-width: 100%;">
    <table style="padding: 8px;" cellspacing="10px">
        <tr style="text-align: left;">
            <th style="width: 80%;">path</th>
            <th style="width: 10%; padding-left: 10px;">account</th>
            <th style="width: 10%; padding-left: 20px;">type</th>
        </tr>
        {% for file in results %}
            <tr>
                <td style="word-break: break-all; width: 80%;" valign="top"> 
                    <a target="_blank" href="{{ file.link | safe}}" style="text-decoration: none; color: white;">
                        {{ file.path | safe }}
                    </a>
                </td>
                {% set account = Config.query.filter_by(id=file.config_id).first() %}
               <td style="padding-left: 10px; width: 10%;" valign="top">{{ account.name | safe }}</td>
               <td style="padding-left: 20px; width: 10%;" valign="top">{{  file.file_type | safe }}</td>
            </tr>
        {% endfor %}
    </table>
</div>


{% endblock %} 